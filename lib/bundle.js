!function(t){var e={};function i(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return t[s].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)i.d(s,l,function(e){return t[e]}.bind(null,l));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){const s=i(1);document.addEventListener("DOMContentLoaded",()=>{var t=document.getElementById("myCanvas"),e=t.getContext("2d");window.canvasWidth=t.width,window.canvasHeight=t.height;let i=new s(e);function l(t){window.grid.addRandom(),requestAnimationFrame(window.grid.intervalFunction)}window.grid=i,window.grid.drawGrid(),e.beginPath(),e.fillStyle="rgba(255, 255, 255, 0.5)",e.fillRect(0,0,400,400),l(),document.getElementsByTagName("button")[0].addEventListener("click",function(){window.grid.resetGrid(),window.grid=new s(e),window.grid.addRandom(),requestAnimationFrame(window.grid.intervalFunction)},!1),window.start=l})},function(t,e,i){const s=i(2),l=i(3);t.exports=class{constructor(t){this.score=0,this.scoreChanging=0,this.ctx=t,this.cellsArray=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.raf=null,this.row=this.cellsArray.length,this.column=this.cellsArray[0].length,this.cellHeight=Math.floor(window.canvasHeight/this.row),this.cellWidth=Math.floor(window.canvasWidth/this.column),this.intervalFunction=this.intervalFunction.bind(this),this.dynamic_cells=[],this.initGrid(),this.drawGrid(),this.onMoving=!1,this.move=this.move.bind(this),document.addEventListener("keydown",this.move)}initGrid(){for(let t=0;t<this.row;t++)for(let e=0;e<this.column;e++)this.cellsArray[t][e]=new s(this.ctx,this.cellsArray[t][e],this.cellWidth,this.cellHeight,[t,e],e*this.cellWidth,t*this.cellHeight)}move(t){37===t.keyCode?this.keyLeft():38===t.keyCode?this.keyUp():39===t.keyCode?this.keyRight():40===t.keyCode&&this.keyDown()}slideDown(t,e){let i=0,s=0,h=!1,n=null,c=0;for(let r=e.length-1;r>=0;r--)0===e[r].value?i+=1:0!==i||n?(n&&n===e[r].value&&!h?(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r+i+1+c].x,e[r+i+1+c].y,!h,0,1,[r+i+1+c,t])),(h=!h)&&(c+=1)):(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r+i+c].x,e[r+i+c].y,!1,0,1,[r+i+c,t])),h&&(h=!1)),s+=1,n=e[r].value,e[r].value=0):(s+=1,n=e[r].value);return e}slideUp(t,e){let i=0,s=0,h=!1,n=null,c=0;for(let r=0;r<e.length;r++)0===e[r].value?i+=1:0!==i||n?(n&&n===e[r].value&&!h?(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r-i-1-c].x,e[r-i-1-c].y,!h,0,-1,[r-i-1-c,t])),(h=!h)&&(c+=1)):(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r-i-c].x,e[r-i-c].y,!1,0,-1,[r-i-c,t])),h&&(h=!1)),s+=1,n=e[r].value,e[r].value=0):(s+=1,n=e[r].value);return e}slideRight(t,e){let i=0,s=0,h=!1,n=null,c=0;for(let r=e.length-1;r>=0;r--)0===e[r].value?i+=1:0!==i||n?(n&&n===e[r].value&&!h?(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r+i+1+c].x,e[r+i+1+c].y,!h,1,0,[t,r+i+1+c])),(h=!h)&&(c+=1)):(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r+i+c].x,e[r+i+c].y,!1,1,0,[t,r+i+c])),h&&(h=!1)),s+=1,n=e[r].value,e[r].value=0):(s+=1,n=e[r].value);return e}slideLeft(t,e){let i=0,s=0,h=!1,n=null,c=0;for(let r=0;r<e.length;r++)0===e[r].value?i+=1:0!==i||n?(n&&n===e[r].value&&!h?(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r-i-1-c].x,e[r-i-1-c].y,!h,-1,0,[t,r-i-1-c])),(h=!h)&&(c+=1)):(this.dynamic_cells.push(new l(e[r].value,this.ctx,e[r].x,e[r].y,this.cellWidth,this.cellHeight,e[r-i-c].x,e[r-i-c].y,!1,-1,0,[t,r-i-c])),h&&(h=!1)),s+=1,n=e[r].value,e[r].value=0):(s+=1,n=e[r].value);return e}addRandom(){document.addEventListener("keydown",this.move);let t,e=[];for(let t=0;t<this.row;t++)for(let i=0;i<this.column;i++)0===this.cellsArray[t][i].value&&e.push({r:t,c:i});e.length>0&&(t=e[Math.floor(Math.random()*e.length)]),this.cellsArray[t.r][t.c]=Math.random()>.5?new s(this.ctx,2,this.cellWidth,this.cellHeight,[t.r,t.c],t.c*this.cellWidth,t.r*this.cellHeight):new s(this.ctx,4,this.cellWidth,this.cellHeight,[t.r,t.c],t.c*this.cellWidth,t.r*this.cellHeight),this.onMoving=!1}updateGrid(t,e){e.collision?this.cellsArray[t[0]][t[1]].value=2*e.value:this.cellsArray[t[0]][t[1]].value=e.value;const i=this.dynamic_cells.findIndex(e=>e.targetPos[0]===t[0]&&e.targetPos[1]===t[1]);this.dynamic_cells=this.dynamic_cells.slice(0,i).concat(this.dynamic_cells.slice(i+1))}drawGrid(){for(let t=0;t<this.row;t++)for(let e=0;e<this.column;e++)this.ctx.beginPath(),this.ctx.lineWidth="12",this.ctx.strokeStyle="#010329",this.ctx.rect(e*this.cellWidth,t*this.cellHeight,this.cellWidth,this.cellHeight),this.ctx.stroke(),this.cellsArray[t][e].draw()}keyUp(){for(let t=0;t<this.column;t++){let e=[this.cellsArray[0][t],this.cellsArray[1][t],this.cellsArray[2][t],this.cellsArray[3][t]];this.slideUp(t,e);for(let i=0;i<this.row;i++)this.cellsArray[i][t]=e[i]}this.dynamic_cells.forEach(t=>{t.checkingCollision()}),0!==this.dynamic_cells.length&&(this.onMoving=!0,document.removeEventListener("keydown",this.move))}keyDown(){for(let t=0;t<this.column;t++){let e=[this.cellsArray[0][t],this.cellsArray[1][t],this.cellsArray[2][t],this.cellsArray[3][t]];this.slideDown(t,e);for(let i=0;i<this.row;i++)this.cellsArray[i][t]=e[i]}this.dynamic_cells.forEach(t=>{t.checkingCollision()}),0!==this.dynamic_cells.length&&(this.onMoving=!0,document.removeEventListener("keydown",this.move))}keyLeft(){for(let t=0;t<this.row;t++)this.slideLeft(t,this.cellsArray[t]);this.dynamic_cells.forEach(t=>{t.checkingCollision()}),0!==this.dynamic_cells.length&&(this.onMoving=!0,document.removeEventListener("keydown",this.move))}keyRight(){for(let t=0;t<this.row;t++)this.slideRight(t,this.cellsArray[t]);this.dynamic_cells.forEach(t=>{t.checkingCollision()}),0!==this.dynamic_cells.length&&(this.onMoving=!0,document.removeEventListener("keydown",this.move))}gameOver(){for(let t=0;t<this.row;t++)for(let e=0;e<this.column;e++){if(0===this.cellsArray[t][e].value)return!1;if(t!=this.row-1&&this.cellsArray[t][e].value===this.cellsArray[t+1][e].value)return!1;if(e!=this.column-1&&this.cellsArray[t][e].value===this.cellsArray[t][e+1].value)return!1}return!0}intervalFunction(){this.raf=requestAnimationFrame(this.intervalFunction),this.ctx.clearRect(0,0,400,400),this.drawGrid(),this.dynamic_cells.forEach(t=>{t.checkingCollision()}),0===this.dynamic_cells.length&&this.onMoving&&this.addRandom(),document.getElementsByTagName("span")[0].innerHTML=`<span> score : ${this.highestScore()}</span>`,this.scoreChanging>0&&(document.getElementsByTagName("strong")[0].innerHTML=`<p> + ${this.scoreChanging}</p>`),this.gameOver()&&0===this.dynamic_cells.length&&(document.removeEventListener("keydown",this.move),cancelAnimationFrame(this.raf),this.gameOverPage())}resetGrid(){document.removeEventListener("keydown",this.move),cancelAnimationFrame(this.raf),this.ctx.clearRect(0,0,400,400)}highestScore(){const t=this.score;for(let t=0;t<this.row;t++)for(let e=0;e<this.column;e++)this.cellsArray[t][e].value>=this.score&&(this.score=this.cellsArray[t][e].value);return this.scoreChanging=this.score-t,this.score}gameOverPage(){this.drawGrid(),this.ctx.beginPath(),this.ctx.fillStyle="rgba(255, 255, 255, 0.5)",this.ctx.fillRect(0,0,400,400),this.ctx.beginPath(),this.ctx.font="bold 35px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="black",this.ctx.fillText("Game Over !",200,170),this.ctx.fillText("your score is "+this.highestScore(),200,220)}}},function(t,e){const i={2:"#eaf1f4",4:"#d1e5f0",8:"#b5d7e8",16:"#9fcbe1",32:"#90c4dd",64:"#4c98c6",128:"#3581b9",256:"#2a73b2",512:"#144d8a",1024:"#164b86",2048:"#134984",4096:"#5106da",8192:"#6b23ef",16384:"#8549f3",32768:"#a37aef"};t.exports=class{constructor(t,e,i,s,l,h,n){this.ctx=t,this.value=e,this.width=i,this.height=s,this.pos=l,this.x=h,this.y=n}draw(){0!==this.value?(this.ctx.beginPath(),this.ctx.fillStyle=i[this.value]?i[this.value]:"#ff80ff",this.ctx.fillRect(this.x+6,this.y+6,this.width-12,this.height-12),this.ctx.beginPath(),this.ctx.font="bold 25pt Courier",this.ctx.fillStyle="black",this.ctx.textAlign="center",this.ctx.fillText(this.value,this.x+this.width/2,this.y+12+this.height/2)):(this.ctx.beginPath(),this.ctx.fillStyle="white",this.ctx.fillRect(this.x+6,this.y+6,this.width-12,this.height-12),this.ctx.beginPath())}}},function(t,e){const i={2:"#eaf1f4",4:"#d1e5f0",8:"#b5d7e8",16:"#9fcbe1",32:"#90c4dd",64:"#4c98c6",128:"#3581b9",256:"#2a73b2",512:"#144d8a",1024:"#164b86",2048:"#134984",4096:"#5106da",8192:"#6b23ef",16384:"#8549f3",32768:"#a37aef"};t.exports=class{constructor(t,e,i,s,l,h,n,c,r=!1,o=0,a=0,d){this.value=t,this.ctx=e,this.x=i,this.y=s,this.width=l,this.height=h,this.endX=n,this.endY=c,this.collision=r,this.xSpeed=o*Math.floor(Math.abs(n-i)/20),this.ySpeed=a*Math.floor(Math.abs(c-s)/20),this.targetPos=d}draw(){this.ctx.beginPath(),this.ctx.fillStyle=i[this.value]?i[this.value]:"#ff80ff",this.ctx.fillRect(this.x+6,this.y+6,this.width-12,this.height-12),this.ctx.beginPath(),this.ctx.font="bold 25pt Courier",this.ctx.fillStyle="black",this.ctx.textAlign="center",this.ctx.fillText(this.value,this.x+this.width/2,this.y+12+this.height/2),this.x+=this.xSpeed,this.y+=this.ySpeed}checkingCollision(){this.x===this.endX&&this.y===this.endY?window.grid.updateGrid(this.targetPos,this):this.draw()}}}]);
//# sourceMappingURL=bundle.js.map